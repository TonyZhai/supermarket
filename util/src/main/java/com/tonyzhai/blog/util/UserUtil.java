package com.tonyzhai.blog.util;import com.tonyzhai.blog.domain.security.domain.User;import org.springframework.security.core.context.SecurityContext;import org.springframework.security.core.context.SecurityContextHolder;import org.springframework.security.core.userdetails.UserDetails;/** * User util * * @author Tony Zhai * @since 13-2-24 PM5:01 */public class UserUtil {    /**     * get current login user     *     * @return current user     */    public static User getCurrentUser() {        SecurityContext context = SecurityContextHolder.getContext();        if (context != null && context.getAuthentication() != null) {            UserDetails userDetails = check(context.getAuthentication().getPrincipal());            if (userDetails != null) {                return new User(userDetails.getUsername(),userDetails.getPassword());            }        }        return null;    }    private static UserDetails check(Object obj) {        if (obj != null && !obj.toString().equals("anonymousUser")) {            return (UserDetails) obj;        }        return null;    }}